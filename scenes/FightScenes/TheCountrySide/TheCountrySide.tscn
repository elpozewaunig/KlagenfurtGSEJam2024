[gd_scene load_steps=31 format=3 uid="uid://bihqmqmhy5qrk"]

[ext_resource type="Texture2D" uid="uid://btjnrke4c1pf3" path="res://scenes/FightScenes/TheMountain/Skybox/spacenopink.jpg" id="3_g3qk6"]
[ext_resource type="ArrayMesh" uid="uid://bk3lbs6yirhyf" path="res://scenes/FightScenes/TheCountrySide/CountrySide6.obj" id="4_bhs08"]
[ext_resource type="Material" uid="uid://dxvag2u3lnpos" path="res://scenes/FightScenes/TheCountrySide/materials/mctrees1.tres" id="5_ctxml"]
[ext_resource type="Material" uid="uid://b32y7a4ql1syx" path="res://scenes/FightScenes/TheCountrySide/materials/mctrees2.tres" id="6_ocwp7"]
[ext_resource type="Material" uid="uid://b2secrb3fmurf" path="res://scenes/FightScenes/TheCountrySide/materials/ground.tres" id="7_nre7i"]
[ext_resource type="Material" uid="uid://o78cu66xwawa" path="res://scenes/FightScenes/TheCountrySide/materials/leaf.tres" id="8_1hqu0"]
[ext_resource type="PackedScene" uid="uid://dtjng8jtop7ed" path="res://assets/sprites/protag/protag.tscn" id="9_r8s6v"]
[ext_resource type="Material" uid="uid://cikbnrbgbhmk2" path="res://scenes/FightScenes/TheCountrySide/materials/trunks.tres" id="9_vr3ul"]
[ext_resource type="Texture2D" uid="uid://mnxcbjjfsn4n" path="res://scenes/FightScenes/TheCountrySide/materials/mctreemulti.png" id="10_h5gba"]
[ext_resource type="PackedScene" uid="uid://ccvejgfug7j0b" path="res://assets/sprites/engel1/angel1.tscn" id="10_xtemg"]
[ext_resource type="Texture2D" uid="uid://sarwg0s46bs2" path="res://scenes/FightScenes/TheChurch/3DText/michaelttexttext.jpg" id="11_twke2"]
[ext_resource type="ArrayMesh" uid="uid://4lger5fh6chq" path="res://scenes/FightScenes/TheChurch/3DText/preistroberttext1.obj" id="12_t5pfc"]
[ext_resource type="ArrayMesh" uid="uid://dfstv50uufwrh" path="res://scenes/FightScenes/TheChurch/3DText/preistroberttext2.obj" id="13_16pfr"]
[ext_resource type="Texture2D" uid="uid://d1qfbpx8ym8rd" path="res://scenes/FightScenes/TheCountrySide/clouds.png" id="14_kro6o"]
[ext_resource type="Script" path="res://code/roundManager.gd" id="14_wpcgj"]
[ext_resource type="Texture2D" uid="uid://clo06kexhsdk5" path="res://scenes/FightScenes/TheMountain/ParallaxLayerTexts/layer1.png" id="15_hxuq5"]
[ext_resource type="PackedScene" uid="uid://dqtcwmca5ongg" path="res://scenes/SpellCastWheel/AutomaticWheel.tscn" id="15_l0ucd"]
[ext_resource type="PackedScene" path="res://scenes/FightScenes/rifttear.tscn" id="16_offic"]
[ext_resource type="PackedScene" uid="uid://ccelpifkgb5xq" path="res://scenes/SpellCastWheel/SpellCastWheel.tscn" id="16_xy2c7"]
[ext_resource type="PackedScene" uid="uid://dvygun7k256ji" path="res://scenes/HudOverlay.tscn" id="17_fyugo"]

[sub_resource type="GDScript" id="GDScript_os87n"]
resource_name = "countrySideController"
script/source = "extends Node3D


func _on_round_manager_player_won() -> void:
	SceneManager.change_scene(SceneManager.mountainCutScene, true)
"

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_ow5hs"]
panorama = ExtResource("3_g3qk6")

[sub_resource type="Sky" id="Sky_iusol"]
sky_material = SubResource("PanoramaSkyMaterial_ow5hs")

[sub_resource type="Environment" id="Environment_055ba"]
background_mode = 2
sky = SubResource("Sky_iusol")
sky_rotation = Vector3(-0.228638, 0, 0)
ambient_light_color = Color(0.497937, 0.417187, 0.591134, 1)
ambient_light_sky_contribution = 0.0
ambient_light_energy = 0.0
tonemap_exposure = 1.92

[sub_resource type="CameraAttributesPractical" id="CameraAttributesPractical_nx174"]
exposure_multiplier = 0.437

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_pksl3"]
shading_mode = 0
albedo_texture = ExtResource("11_twke2")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_omdaq"]
shading_mode = 0
albedo_texture = ExtResource("11_twke2")

[sub_resource type="Animation" id="Animation_sstbc"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 84.471, -472.923)]
}

[sub_resource type="Animation" id="Animation_k6lpu"]
resource_name = "cloudmove"
length = 250.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 242.033),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, 84.471, -472.923), Vector3(0, 224.026, 105.537)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_bdj4s"]
_data = {
"RESET": SubResource("Animation_sstbc"),
"cloudmove": SubResource("Animation_k6lpu")
}

[node name="TheRift" type="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.147749, 0.0364075, -0.0162697)
script = SubResource("GDScript_os87n")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.968583, -0.24869, 0, 0.24869, 0.968583, 1.016, -1.154, 2.384)
fov = 61.2

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_055ba")
camera_attributes = SubResource("CameraAttributesPractical_nx174")

[node name="Node3D" type="Node3D" parent="."]
transform = Transform3D(-4.80825e-09, 0, -0.11, 0, 0.11, 0, 0.11, 0, -4.80825e-09, -3.965, -24.657, -32.322)

[node name="CountrySide6" type="MeshInstance3D" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 266.604, 206.925, -46.2543)
mesh = ExtResource("4_bhs08")
skeleton = NodePath("../..")
surface_material_override/0 = ExtResource("5_ctxml")
surface_material_override/1 = ExtResource("6_ocwp7")
surface_material_override/2 = ExtResource("7_nre7i")
surface_material_override/3 = ExtResource("8_1hqu0")
surface_material_override/4 = ExtResource("9_vr3ul")

[node name="Sprite3D" type="Sprite3D" parent="Node3D"]
transform = Transform3D(12.56, 0, 0, 0, 12.1458, -3.19886, 0, 3.19886, 12.1458, 231.171, 234.081, 31.4375)
texture = ExtResource("10_h5gba")

[node name="Sprite3D3" type="Sprite3D" parent="Node3D"]
transform = Transform3D(12.56, 0, 0, 0, 12.1458, -3.19886, 0, 3.19886, 12.1458, 231.171, 243.405, 44.7817)
texture = ExtResource("10_h5gba")

[node name="Sprite3D2" type="Sprite3D" parent="Node3D"]
transform = Transform3D(12.56, 0, 0, 0, 12.1946, 3.00769, 0, -3.00769, 12.1946, 220.489, 235.066, -123.536)
texture = ExtResource("10_h5gba")

[node name="Sprite3D5" type="Sprite3D" parent="Node3D"]
transform = Transform3D(8.25928, -2.26593, 9.18714, 0, 12.1946, 3.00769, -9.46245, -1.97781, 8.01897, 100.071, 248.935, -136.668)
texture = ExtResource("10_h5gba")

[node name="Sprite3D6" type="Sprite3D" parent="Node3D"]
transform = Transform3D(-5.05027, -2.75384, 11.1653, 0, 12.1946, 3.00769, -11.4999, 1.20936, -4.90333, 109.125, 252.473, 4.8662)
texture = ExtResource("10_h5gba")

[node name="Sprite3D7" type="Sprite3D" parent="Node3D"]
transform = Transform3D(-3.88834, -2.85993, 11.5955, -7.52549e-08, 12.1946, 3.00769, -11.943, 0.931123, -3.77521, 17.4533, 255.126, -50.0533)
texture = ExtResource("10_h5gba")

[node name="Sprite3D4" type="Sprite3D" parent="Node3D"]
transform = Transform3D(12.56, 0, 0, 0, 12.1946, 3.00769, 0, -3.00769, 12.1946, 220.489, 249.972, -142.52)
texture = ExtResource("10_h5gba")

[node name="Protag" parent="." instance=ExtResource("9_r8s6v")]
transform = Transform3D(-0.959072, 0, -0.283162, 0, 1, 0, 0.283162, 0, -0.959072, 2.31883, -0.709036, 2.14352)

[node name="Angel1" parent="." instance=ExtResource("10_xtemg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.729042, -0.0364075, -3.45947)

[node name="Preistroberttext1" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.556209, -0.831043, 0, 0.831043, 0.556209, 0.825812, 0.454169, -5.17585)
material_override = SubResource("StandardMaterial3D_pksl3")
mesh = ExtResource("12_t5pfc")

[node name="Preistroberttext2" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.73015, -0.683287, 0, 0.683287, 0.73015, 0.801404, 0.923181, -4.87205)
material_override = SubResource("StandardMaterial3D_omdaq")
mesh = ExtResource("13_16pfr")

[node name="Sprite3D" type="Sprite3D" parent="."]
transform = Transform3D(58.515, 0, 0, 0, 15.1014, -56.5328, 0, 56.5328, 15.1014, 0, 84.471, -472.923)
modulate = Color(0.501353, 0.558145, 0.648084, 0.447059)
texture = ExtResource("14_kro6o")

[node name="AnimationPlayer" type="AnimationPlayer" parent="Sprite3D"]
libraries = {
"": SubResource("AnimationLibrary_bdj4s")
}
autoplay = "cloudmove"

[node name="PrallaxLayer1" type="Sprite3D" parent="."]
transform = Transform3D(10, 0, 0, 0, 10, 0, 0, 0, 10, -0.637, 48.102, -218.204)
modulate = Color(0.442911, 0.442911, 0.442911, 1)
texture = ExtResource("15_hxuq5")

[node name="f" parent="." instance=ExtResource("16_offic")]
transform = Transform3D(0.295, 0, 0, 0, -1.28949e-08, -0.295, 0, 0.295, -1.28949e-08, 26.8468, 92.1612, -224.973)

[node name="roundManager" type="Node3D" parent="." node_paths=PackedStringArray("playerWheel", "opponentWheel")]
script = ExtResource("14_wpcgj")
playerWheel = NodePath("ManualWheel")
opponentWheel = NodePath("AutomaticWheel")
hasProgressBar = true
timeForRoud = 20

[node name="AutomaticWheel" parent="roundManager" instance=ExtResource("15_l0ucd")]
transform = Transform3D(1, 0, 0, 0, 0.683273, -0.730162, 0, 0.730162, 0.683273, 2, 0.5, -1.336)

[node name="ManualWheel" parent="roundManager" instance=ExtResource("16_xy2c7")]
transform = Transform3D(1, 0, 0, 0, 0.786935, -0.617036, 0, 0.617036, 0.786935, 0, 0.5, -1.574)

[node name="HudOverlay" parent="roundManager" instance=ExtResource("17_fyugo")]

[connection signal="playerWon" from="roundManager" to="." method="_on_round_manager_player_won"]
[connection signal="updateProgressBarTo" from="roundManager" to="roundManager/HudOverlay" method="_on_round_manager_update_progress_bar_to"]
